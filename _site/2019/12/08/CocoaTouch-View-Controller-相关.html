<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>CocoaTouch View Controller 相关 | 牛さんの部落格</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="CocoaTouch View Controller 相关" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="CocoaTouch View Controller 相关 应用的内容呈现在一个 window 中，一个 window 需要包含一个 rootViewController 来管理应用中数据，视图的展现及跳转。所以 View Controller 会扮演很重要的角色。 视图控制器/View Controller View Controller 用来管理视图，比如视图创建，跳转到其他视图，同时充当界面与数据的中间人，管理数据变更及数据在视图中的展现。 所以可分为两类， 容器类，比如 UINavigationController，UISplitViewController 及 UIPageViewController ... 内容类。UITableViewController，UICollectionViewController 等，还包括用户通过继承 UIViewContrller 方式创建用来展示内容的 View Controller。 一般容器类的会作为 UIWindow 的 rootViewController。 使用 Storyboard 或 XIB 开发视图时， rootViewController 是自动设置的，以下是手动设置的示例： AppDelegate.m - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds]; self.window.rootViewController = [NavigatorController new]; [self.window makeKeyAndVisible]; return YES; } 命名 View Controller 基类是 UIViewController，讲道理其子类都命名成 XYZViewController 是比较符合逻辑的，UIKit 自带的大部分组件确实如此，也有略去 View 直接叫 XYZController 的，比如容器类型 UINavigationController，如果搜索 UIKit 的话，两种名称都挺多的， UIKit/UIKitCore.h #import &lt;UIKit/UICollectionViewController.h&gt; #import &lt;UIKit/UIDocumentMenuViewController.h&gt; #import &lt;UIKit/UIDocumentPickerExtensionViewController.h&gt; #import &lt;UIKit/UIDocumentPickerViewController.h&gt; #import &lt;UIKit/UIFontPickerViewController.h&gt; #import &lt;UIKit/UIInputViewController.h&gt; #import &lt;UIKit/UIPageViewController.h&gt; #import &lt;UIKit/UIReferenceLibraryViewController.h&gt; #import &lt;UIKit/UISearchContainerViewController.h&gt; #import &lt;UIKit/UISplitViewController.h&gt; #import &lt;UIKit/UITableViewController.h&gt; #import &lt;UIKit/UIViewController.h&gt; #import &lt;UIKit/UIAlertController.h&gt; #import &lt;UIKit/UICloudSharingController.h&gt; #import &lt;UIKit/UIImagePickerController.h&gt; #import &lt;UIKit/UIMenuController.h&gt; #import &lt;UIKit/UINavigationController.h&gt; #import &lt;UIKit/UIPopoverController.h&gt; #import &lt;UIKit/UIPopoverPresentationController.h&gt; #import &lt;UIKit/UIPresentationController.h&gt; #import &lt;UIKit/UIPrinterPickerController.h&gt; #import &lt;UIKit/UIPrintInteractionController.h&gt; #import &lt;UIKit/UISearchController.h&gt; #import &lt;UIKit/UISearchDisplayController.h&gt; #import &lt;UIKit/UITabBarController.h&gt; #import &lt;UIKit/UIVideoEditorController.h&gt; 视图树 无论容器类还是内容类，都会有一个根视图节点，可通过 self.view 访问，通过它可添加其他视图，从而形成视图树。 A container acting as the root view controller 图片来自 Apple 文档 一般作为 rootViewController 的控制器不直接管理 view，而是向其中添加其他 view controller，这些 controller 中包含需要显示的 view。而 rootViewController 的尺寸，依据其所处的位置而定，如果是 window 的 rootViewController，则撑满整个 window。 The size and position of the root view is determined by the object that owns it, which is either a parent view controller or the app’s window. The view controller that is owned by the window is the app’s root view controller and its view is sized to fill the window. -- UIViewController - View Management View Contrller 的呈现 两种方式， 通过容器型来呈现 原地直接呈现 容器型 比如 UITabBarController 可以配置多个 tab 及其关联的 View Controller，tab 切换时会自动切换到相应的子 controller。 再比如 UINavigationController，它维护了一个 View Ccontroller 的栈，当向其中 push 新的 View Controller 时界面便会切到相应的 controller。 示例： [self pushViewController:[UIViewController new] animated:YES]; 原地直接呈现 UIViewController 提供了一些方法可以使用多种试呈现 View Controller，包括全屏的，模态类型的， showViewController:sender: showDetailViewController:sender: presentViewController:animated:completion: 示例： - (void)add:(id)sender { // Create the root view controller for the navigation controller // The new view controller configures a Cancel and Done button for the // navigation bar. RecipeAddViewController *addController = [[RecipeAddViewController alloc] init]; addController.modalPresentationStyle = UIModalPresentationFullScreen; addController.transitionStyle = UIModalTransitionStyleCoverVertical; [self presentViewController:addController animated:YES completion: nil]; } UINavigationController 使用示例 UINavigationController 包含一个存储 View Controller 的数组，通过向其中压入新的 View Controller 来呈现新页面。 @property(nonatomic,copy) NSArray&lt;__kindof UIViewController *&gt; *viewControllers; // The current view controller stack. 示例： MyNavigationController.m - (void)viewDidLoad { [super viewDidLoad]; [self pushViewController:[UIViewController new] animated:YES]; } 导航 导航是属于 UINavigationController 中子 Controller 的，所以需要在子 Controller 中去设置，而不是在 UINavigationController 中。同样，导航的标题也是。 MyViewController.m - (void)viewDidLoad { self.title = @&quot;ttile&quot;; UIBarButtonItem *left = [[UIBarButtonItem alloc] initWithTitle:@&quot;left&quot; style:UIBarButtonItemStylePlain target:nil action:nil]; [self.navigationItem setLeftBarButtonItem:left]; self.navigationItem.prompt = @&quot;prompt&quot;; self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@&quot;back to launch screen&quot; style:UIBarButtonItemStyleDone target:nil action:nil]; UIBarButtonItem *right = [[UIBarButtonItem alloc] initWithTitle:@&quot;right&quot; style:UIBarButtonItemStylePlain target:nil action:nil]; [self.navigationItem setRightBarButtonItem:right]; } toolbar 要展示 toolbar，需要先在 NavigationContorller 中设置成显示， MyNavigationController.m self.toolbarHidden = NO; 然后在子 Controller 中配置具体要展示的内容： MyViewController.m - (void)viewDidLoad { self.toolbarItems = @[ [[UIBarButtonItem alloc] initWithTitle:@&quot;btn1&quot; style:UIBarButtonItemStylePlain target:nil action:nil], [[UIBarButtonItem alloc] initWithTitle:@&quot;btn2&quot; style:UIBarButtonItemStylePlain target:nil action:nil] ]; } 相关资源 View Controller Programming Guide for iOS" />
<meta property="og:description" content="CocoaTouch View Controller 相关 应用的内容呈现在一个 window 中，一个 window 需要包含一个 rootViewController 来管理应用中数据，视图的展现及跳转。所以 View Controller 会扮演很重要的角色。 视图控制器/View Controller View Controller 用来管理视图，比如视图创建，跳转到其他视图，同时充当界面与数据的中间人，管理数据变更及数据在视图中的展现。 所以可分为两类， 容器类，比如 UINavigationController，UISplitViewController 及 UIPageViewController ... 内容类。UITableViewController，UICollectionViewController 等，还包括用户通过继承 UIViewContrller 方式创建用来展示内容的 View Controller。 一般容器类的会作为 UIWindow 的 rootViewController。 使用 Storyboard 或 XIB 开发视图时， rootViewController 是自动设置的，以下是手动设置的示例： AppDelegate.m - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds]; self.window.rootViewController = [NavigatorController new]; [self.window makeKeyAndVisible]; return YES; } 命名 View Controller 基类是 UIViewController，讲道理其子类都命名成 XYZViewController 是比较符合逻辑的，UIKit 自带的大部分组件确实如此，也有略去 View 直接叫 XYZController 的，比如容器类型 UINavigationController，如果搜索 UIKit 的话，两种名称都挺多的， UIKit/UIKitCore.h #import &lt;UIKit/UICollectionViewController.h&gt; #import &lt;UIKit/UIDocumentMenuViewController.h&gt; #import &lt;UIKit/UIDocumentPickerExtensionViewController.h&gt; #import &lt;UIKit/UIDocumentPickerViewController.h&gt; #import &lt;UIKit/UIFontPickerViewController.h&gt; #import &lt;UIKit/UIInputViewController.h&gt; #import &lt;UIKit/UIPageViewController.h&gt; #import &lt;UIKit/UIReferenceLibraryViewController.h&gt; #import &lt;UIKit/UISearchContainerViewController.h&gt; #import &lt;UIKit/UISplitViewController.h&gt; #import &lt;UIKit/UITableViewController.h&gt; #import &lt;UIKit/UIViewController.h&gt; #import &lt;UIKit/UIAlertController.h&gt; #import &lt;UIKit/UICloudSharingController.h&gt; #import &lt;UIKit/UIImagePickerController.h&gt; #import &lt;UIKit/UIMenuController.h&gt; #import &lt;UIKit/UINavigationController.h&gt; #import &lt;UIKit/UIPopoverController.h&gt; #import &lt;UIKit/UIPopoverPresentationController.h&gt; #import &lt;UIKit/UIPresentationController.h&gt; #import &lt;UIKit/UIPrinterPickerController.h&gt; #import &lt;UIKit/UIPrintInteractionController.h&gt; #import &lt;UIKit/UISearchController.h&gt; #import &lt;UIKit/UISearchDisplayController.h&gt; #import &lt;UIKit/UITabBarController.h&gt; #import &lt;UIKit/UIVideoEditorController.h&gt; 视图树 无论容器类还是内容类，都会有一个根视图节点，可通过 self.view 访问，通过它可添加其他视图，从而形成视图树。 A container acting as the root view controller 图片来自 Apple 文档 一般作为 rootViewController 的控制器不直接管理 view，而是向其中添加其他 view controller，这些 controller 中包含需要显示的 view。而 rootViewController 的尺寸，依据其所处的位置而定，如果是 window 的 rootViewController，则撑满整个 window。 The size and position of the root view is determined by the object that owns it, which is either a parent view controller or the app’s window. The view controller that is owned by the window is the app’s root view controller and its view is sized to fill the window. -- UIViewController - View Management View Contrller 的呈现 两种方式， 通过容器型来呈现 原地直接呈现 容器型 比如 UITabBarController 可以配置多个 tab 及其关联的 View Controller，tab 切换时会自动切换到相应的子 controller。 再比如 UINavigationController，它维护了一个 View Ccontroller 的栈，当向其中 push 新的 View Controller 时界面便会切到相应的 controller。 示例： [self pushViewController:[UIViewController new] animated:YES]; 原地直接呈现 UIViewController 提供了一些方法可以使用多种试呈现 View Controller，包括全屏的，模态类型的， showViewController:sender: showDetailViewController:sender: presentViewController:animated:completion: 示例： - (void)add:(id)sender { // Create the root view controller for the navigation controller // The new view controller configures a Cancel and Done button for the // navigation bar. RecipeAddViewController *addController = [[RecipeAddViewController alloc] init]; addController.modalPresentationStyle = UIModalPresentationFullScreen; addController.transitionStyle = UIModalTransitionStyleCoverVertical; [self presentViewController:addController animated:YES completion: nil]; } UINavigationController 使用示例 UINavigationController 包含一个存储 View Controller 的数组，通过向其中压入新的 View Controller 来呈现新页面。 @property(nonatomic,copy) NSArray&lt;__kindof UIViewController *&gt; *viewControllers; // The current view controller stack. 示例： MyNavigationController.m - (void)viewDidLoad { [super viewDidLoad]; [self pushViewController:[UIViewController new] animated:YES]; } 导航 导航是属于 UINavigationController 中子 Controller 的，所以需要在子 Controller 中去设置，而不是在 UINavigationController 中。同样，导航的标题也是。 MyViewController.m - (void)viewDidLoad { self.title = @&quot;ttile&quot;; UIBarButtonItem *left = [[UIBarButtonItem alloc] initWithTitle:@&quot;left&quot; style:UIBarButtonItemStylePlain target:nil action:nil]; [self.navigationItem setLeftBarButtonItem:left]; self.navigationItem.prompt = @&quot;prompt&quot;; self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@&quot;back to launch screen&quot; style:UIBarButtonItemStyleDone target:nil action:nil]; UIBarButtonItem *right = [[UIBarButtonItem alloc] initWithTitle:@&quot;right&quot; style:UIBarButtonItemStylePlain target:nil action:nil]; [self.navigationItem setRightBarButtonItem:right]; } toolbar 要展示 toolbar，需要先在 NavigationContorller 中设置成显示， MyNavigationController.m self.toolbarHidden = NO; 然后在子 Controller 中配置具体要展示的内容： MyViewController.m - (void)viewDidLoad { self.toolbarItems = @[ [[UIBarButtonItem alloc] initWithTitle:@&quot;btn1&quot; style:UIBarButtonItemStylePlain target:nil action:nil], [[UIBarButtonItem alloc] initWithTitle:@&quot;btn2&quot; style:UIBarButtonItemStylePlain target:nil action:nil] ]; } 相关资源 View Controller Programming Guide for iOS" />
<link rel="canonical" href="http://localhost:4000/2019/12/08/CocoaTouch-View-Controller-%E7%9B%B8%E5%85%B3.html" />
<meta property="og:url" content="http://localhost:4000/2019/12/08/CocoaTouch-View-Controller-%E7%9B%B8%E5%85%B3.html" />
<meta property="og:site_name" content="牛さんの部落格" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-12-08T13:12:00+08:00" />
<script type="application/ld+json">
{"url":"http://localhost:4000/2019/12/08/CocoaTouch-View-Controller-%E7%9B%B8%E5%85%B3.html","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2019/12/08/CocoaTouch-View-Controller-%E7%9B%B8%E5%85%B3.html"},"description":"CocoaTouch View Controller 相关 应用的内容呈现在一个 window 中，一个 window 需要包含一个 rootViewController 来管理应用中数据，视图的展现及跳转。所以 View Controller 会扮演很重要的角色。 视图控制器/View Controller View Controller 用来管理视图，比如视图创建，跳转到其他视图，同时充当界面与数据的中间人，管理数据变更及数据在视图中的展现。 所以可分为两类， 容器类，比如 UINavigationController，UISplitViewController 及 UIPageViewController ... 内容类。UITableViewController，UICollectionViewController 等，还包括用户通过继承 UIViewContrller 方式创建用来展示内容的 View Controller。 一般容器类的会作为 UIWindow 的 rootViewController。 使用 Storyboard 或 XIB 开发视图时， rootViewController 是自动设置的，以下是手动设置的示例： AppDelegate.m - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds]; self.window.rootViewController = [NavigatorController new]; [self.window makeKeyAndVisible]; return YES; } 命名 View Controller 基类是 UIViewController，讲道理其子类都命名成 XYZViewController 是比较符合逻辑的，UIKit 自带的大部分组件确实如此，也有略去 View 直接叫 XYZController 的，比如容器类型 UINavigationController，如果搜索 UIKit 的话，两种名称都挺多的， UIKit/UIKitCore.h #import &lt;UIKit/UICollectionViewController.h&gt; #import &lt;UIKit/UIDocumentMenuViewController.h&gt; #import &lt;UIKit/UIDocumentPickerExtensionViewController.h&gt; #import &lt;UIKit/UIDocumentPickerViewController.h&gt; #import &lt;UIKit/UIFontPickerViewController.h&gt; #import &lt;UIKit/UIInputViewController.h&gt; #import &lt;UIKit/UIPageViewController.h&gt; #import &lt;UIKit/UIReferenceLibraryViewController.h&gt; #import &lt;UIKit/UISearchContainerViewController.h&gt; #import &lt;UIKit/UISplitViewController.h&gt; #import &lt;UIKit/UITableViewController.h&gt; #import &lt;UIKit/UIViewController.h&gt; #import &lt;UIKit/UIAlertController.h&gt; #import &lt;UIKit/UICloudSharingController.h&gt; #import &lt;UIKit/UIImagePickerController.h&gt; #import &lt;UIKit/UIMenuController.h&gt; #import &lt;UIKit/UINavigationController.h&gt; #import &lt;UIKit/UIPopoverController.h&gt; #import &lt;UIKit/UIPopoverPresentationController.h&gt; #import &lt;UIKit/UIPresentationController.h&gt; #import &lt;UIKit/UIPrinterPickerController.h&gt; #import &lt;UIKit/UIPrintInteractionController.h&gt; #import &lt;UIKit/UISearchController.h&gt; #import &lt;UIKit/UISearchDisplayController.h&gt; #import &lt;UIKit/UITabBarController.h&gt; #import &lt;UIKit/UIVideoEditorController.h&gt; 视图树 无论容器类还是内容类，都会有一个根视图节点，可通过 self.view 访问，通过它可添加其他视图，从而形成视图树。 A container acting as the root view controller 图片来自 Apple 文档 一般作为 rootViewController 的控制器不直接管理 view，而是向其中添加其他 view controller，这些 controller 中包含需要显示的 view。而 rootViewController 的尺寸，依据其所处的位置而定，如果是 window 的 rootViewController，则撑满整个 window。 The size and position of the root view is determined by the object that owns it, which is either a parent view controller or the app’s window. The view controller that is owned by the window is the app’s root view controller and its view is sized to fill the window. -- UIViewController - View Management View Contrller 的呈现 两种方式， 通过容器型来呈现 原地直接呈现 容器型 比如 UITabBarController 可以配置多个 tab 及其关联的 View Controller，tab 切换时会自动切换到相应的子 controller。 再比如 UINavigationController，它维护了一个 View Ccontroller 的栈，当向其中 push 新的 View Controller 时界面便会切到相应的 controller。 示例： [self pushViewController:[UIViewController new] animated:YES]; 原地直接呈现 UIViewController 提供了一些方法可以使用多种试呈现 View Controller，包括全屏的，模态类型的， showViewController:sender: showDetailViewController:sender: presentViewController:animated:completion: 示例： - (void)add:(id)sender { // Create the root view controller for the navigation controller // The new view controller configures a Cancel and Done button for the // navigation bar. RecipeAddViewController *addController = [[RecipeAddViewController alloc] init]; addController.modalPresentationStyle = UIModalPresentationFullScreen; addController.transitionStyle = UIModalTransitionStyleCoverVertical; [self presentViewController:addController animated:YES completion: nil]; } UINavigationController 使用示例 UINavigationController 包含一个存储 View Controller 的数组，通过向其中压入新的 View Controller 来呈现新页面。 @property(nonatomic,copy) NSArray&lt;__kindof UIViewController *&gt; *viewControllers; // The current view controller stack. 示例： MyNavigationController.m - (void)viewDidLoad { [super viewDidLoad]; [self pushViewController:[UIViewController new] animated:YES]; } 导航 导航是属于 UINavigationController 中子 Controller 的，所以需要在子 Controller 中去设置，而不是在 UINavigationController 中。同样，导航的标题也是。 MyViewController.m - (void)viewDidLoad { self.title = @&quot;ttile&quot;; UIBarButtonItem *left = [[UIBarButtonItem alloc] initWithTitle:@&quot;left&quot; style:UIBarButtonItemStylePlain target:nil action:nil]; [self.navigationItem setLeftBarButtonItem:left]; self.navigationItem.prompt = @&quot;prompt&quot;; self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@&quot;back to launch screen&quot; style:UIBarButtonItemStyleDone target:nil action:nil]; UIBarButtonItem *right = [[UIBarButtonItem alloc] initWithTitle:@&quot;right&quot; style:UIBarButtonItemStylePlain target:nil action:nil]; [self.navigationItem setRightBarButtonItem:right]; } toolbar 要展示 toolbar，需要先在 NavigationContorller 中设置成显示， MyNavigationController.m self.toolbarHidden = NO; 然后在子 Controller 中配置具体要展示的内容： MyViewController.m - (void)viewDidLoad { self.toolbarItems = @[ [[UIBarButtonItem alloc] initWithTitle:@&quot;btn1&quot; style:UIBarButtonItemStylePlain target:nil action:nil], [[UIBarButtonItem alloc] initWithTitle:@&quot;btn2&quot; style:UIBarButtonItemStylePlain target:nil action:nil] ]; } 相关资源 View Controller Programming Guide for iOS","@type":"BlogPosting","headline":"CocoaTouch View Controller 相关","dateModified":"2019-12-08T13:12:00+08:00","datePublished":"2019-12-08T13:12:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="牛さんの部落格" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">牛さんの部落格</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">CocoaTouch View Controller 相关</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-12-08T13:12:00+08:00" itemprop="datePublished">Dec 8, 2019
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1 id="cocoatouch-view-controller-相关">CocoaTouch View Controller 相关</h1>

<p>应用的内容呈现在一个 window 中，一个 window 需要包含一个 rootViewController 来管理应用中数据，视图的展现及跳转。所以 View Controller  会扮演很重要的角色。</p>

<h2 id="视图控制器view-controller">视图控制器/View Controller</h2>

<p>View Controller 用来管理视图，比如视图创建，跳转到其他视图，同时充当界面与数据的中间人，管理数据变更及数据在视图中的展现。</p>

<p>所以可分为两类，</p>
<ul>
  <li>容器类，比如 <a href="https://developer.apple.com/documentation/uikit/uinavigationcontroller">UINavigationController</a>，<a href="https://developer.apple.com/documentation/uikit/uisplitviewcontroller">UISplitViewController</a> 及 <a href="https://developer.apple.com/documentation/uikit/uipageviewcontroller">UIPageViewController</a> ...</li>
  <li>内容类。<a href="https://developer.apple.com/documentation/uikit/uitableviewcontroller">UITableViewController</a>，<a href="https://developer.apple.com/documentation/uikit/uicollectionviewcontroller">UICollectionViewController</a> 等，还包括用户通过继承 UIViewContrller 方式创建用来展示内容的 View Controller。</li>
</ul>

<p>一般容器类的会作为 <a href="https://developer.apple.com/documentation/uikit/uiwindow">UIWindow</a> 的 <a href="https://developer.apple.com/documentation/uikit/uiwindow/1621581-rootviewcontroller">rootViewController</a>。</p>

<p>使用 Storyboard 或 XIB 开发视图时， rootViewController 是自动设置的，以下是手动设置的示例：</p>

<p><em>AppDelegate.m</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="nf">application</span><span class="p">:(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span>
    <span class="nf">didFinishLaunchingWithOptions</span><span class="p">:(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span> <span class="p">{</span>
  <span class="n">self</span><span class="p">.</span><span class="n">window</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIWindow</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFrame</span><span class="p">:[</span><span class="n">UIScreen</span> <span class="nf">mainScreen</span><span class="p">].</span><span class="n">bounds</span><span class="p">];</span>
  <span class="n">self</span><span class="p">.</span><span class="n">window</span><span class="p">.</span><span class="n">rootViewController</span> <span class="o">=</span> <span class="p">[</span><span class="n">NavigatorController</span> <span class="nf">new</span><span class="p">];</span>
  <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">window</span> <span class="nf">makeKeyAndVisible</span><span class="p">];</span>
  <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="命名">命名</h2>

<p>View Controller 基类是   <a href="https://developer.apple.com/documentation/uikit/uiviewcontroller?language=objc">UIViewController</a>，讲道理其子类都命名成 XYZViewController 是比较符合逻辑的，UIKit 自带的大部分组件确实如此，也有略去 View 直接叫 XYZController 的，比如容器类型 <a href="https://developer.apple.com/documentation/uikit/uinavigationcontroller">UINavigationController</a>，如果搜索 UIKit 的话，两种名称都挺多的，</p>

<p><em>UIKit/UIKitCore.h</em></p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#import &lt;UIKit/UICollectionViewController.h&gt;
#import &lt;UIKit/UIDocumentMenuViewController.h&gt;
#import &lt;UIKit/UIDocumentPickerExtensionViewController.h&gt;
#import &lt;UIKit/UIDocumentPickerViewController.h&gt;
#import &lt;UIKit/UIFontPickerViewController.h&gt;
#import &lt;UIKit/UIInputViewController.h&gt;
#import &lt;UIKit/UIPageViewController.h&gt;
#import &lt;UIKit/UIReferenceLibraryViewController.h&gt;
#import &lt;UIKit/UISearchContainerViewController.h&gt;
#import &lt;UIKit/UISplitViewController.h&gt;
#import &lt;UIKit/UITableViewController.h&gt;
#import &lt;UIKit/UIViewController.h&gt;
</span>
<span class="cp">#import &lt;UIKit/UIAlertController.h&gt;
#import &lt;UIKit/UICloudSharingController.h&gt;
#import &lt;UIKit/UIImagePickerController.h&gt;
#import &lt;UIKit/UIMenuController.h&gt;
#import &lt;UIKit/UINavigationController.h&gt;
#import &lt;UIKit/UIPopoverController.h&gt;
#import &lt;UIKit/UIPopoverPresentationController.h&gt;
#import &lt;UIKit/UIPresentationController.h&gt;
#import &lt;UIKit/UIPrinterPickerController.h&gt;
#import &lt;UIKit/UIPrintInteractionController.h&gt;
#import &lt;UIKit/UISearchController.h&gt;
#import &lt;UIKit/UISearchDisplayController.h&gt;
#import &lt;UIKit/UITabBarController.h&gt;
#import &lt;UIKit/UIVideoEditorController.h&gt;
</span></code></pre></div></div>

<h2 id="视图树">视图树</h2>

<p>无论容器类还是内容类，都会有一个根视图节点，可通过 <code class="language-plaintext highlighter-rouge">self.view</code> 访问，通过它可添加其他视图，从而形成视图树。</p>

<p><img src="https://developer.apple.com/library/archive/featuredarticles/ViewControllerPGforiPhoneOS/Art/VCPG-container-acting-as-root-view-controller_2-2_2x.png" alt="A container acting as the root view controller 图片来自 Apple 文档" /></p>
<p align="center">A container acting as the root view controller 图片来自 Apple 文档</p>

<p>一般作为 rootViewController 的控制器不直接管理 view，而是向其中添加其他 view controller，这些 controller 中包含需要显示的 view。而 rootViewController 的尺寸，依据其所处的位置而定，如果是 window 的 rootViewController，则撑满整个 window。</p>

<blockquote>
  <p>The size and position of the root view is determined by the object that owns it, which is either a parent view controller or the app’s window. The view controller that is owned by the window is the app’s root view controller and its view is sized to fill the window.
-- <a href="https://developer.apple.com/documentation/uikit/uiviewcontroller?language=objc">UIViewController - View Management</a></p>
</blockquote>

<h2 id="view-contrller-的呈现">View Contrller 的呈现</h2>

<p>两种方式，</p>
<ul>
  <li>通过容器型来呈现</li>
  <li>原地直接呈现</li>
</ul>

<h3 id="容器型">容器型</h3>

<p>比如 UITabBarController 可以配置多个 tab 及其关联的 View Controller，tab 切换时会自动切换到相应的子 controller。
再比如 UINavigationController，它维护了一个 View Ccontroller 的栈，当向其中 push 新的 View Controller 时界面便会切到相应的 controller。</p>

<p>示例：</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">self</span> <span class="nf">pushViewController</span><span class="p">:[</span><span class="n">UIViewController</span> <span class="nf">new</span><span class="p">]</span> <span class="nf">animated</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
</code></pre></div></div>

<h3 id="原地直接呈现">原地直接呈现</h3>

<p>UIViewController 提供了一些方法可以使用多种试呈现 View Controller，包括全屏的，模态类型的，</p>

<ul>
  <li>showViewController:sender:</li>
  <li>showDetailViewController:sender:</li>
  <li>presentViewController:animated:completion:</li>
</ul>

<p>示例：</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">add</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="nv">sender</span> <span class="p">{</span>
   <span class="c1">// Create the root view controller for the navigation controller</span>
   <span class="c1">// The new view controller configures a Cancel and Done button for the</span>
   <span class="c1">// navigation bar.</span>
   <span class="n">RecipeAddViewController</span> <span class="o">*</span><span class="n">addController</span> <span class="o">=</span> <span class="p">[[</span><span class="n">RecipeAddViewController</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
 
   <span class="n">addController</span><span class="p">.</span><span class="n">modalPresentationStyle</span> <span class="o">=</span> <span class="n">UIModalPresentationFullScreen</span><span class="p">;</span>
   <span class="n">addController</span><span class="p">.</span><span class="n">transitionStyle</span> <span class="o">=</span> <span class="n">UIModalTransitionStyleCoverVertical</span><span class="p">;</span>
   <span class="p">[</span><span class="n">self</span> <span class="nf">presentViewController</span><span class="p">:</span><span class="n">addController</span> <span class="nf">animated</span><span class="p">:</span><span class="nb">YES</span> <span class="n">completion</span><span class="o">:</span> <span class="nb">nil</span><span class="p">];</span>
<span class="p">}</span>

</code></pre></div></div>

<h2 id="uinavigationcontroller-使用示例">UINavigationController 使用示例</h2>

<p>UINavigationController 包含一个存储 View Controller 的数组，通过向其中压入新的 View Controller 来呈现新页面。</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span><span class="n">copy</span><span class="p">)</span> <span class="n">NSArray</span><span class="o">&lt;</span><span class="n">__kindof</span> <span class="n">UIViewController</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">viewControllers</span><span class="p">;</span> <span class="c1">// The current view controller stack.</span>
</code></pre></div></div>

<p>示例：</p>

<p><em>MyNavigationController.m</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span> <span class="p">{</span>
  <span class="p">[</span><span class="n">super</span> <span class="nf">viewDidLoad</span><span class="p">];</span>
  <span class="p">[</span><span class="n">self</span> <span class="nf">pushViewController</span><span class="p">:[</span><span class="n">UIViewController</span> <span class="nf">new</span><span class="p">]</span> <span class="nf">animated</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="导航">导航</h3>

<p>导航是属于 UINavigationController 中子 Controller 的，所以需要在子 Controller 中去设置，而不是在 UINavigationController 中。同样，导航的标题也是。</p>

<p><em>MyViewController.m</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span> <span class="p">{</span>
  <span class="n">self</span><span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="s">@"ttile"</span><span class="p">;</span>
  <span class="n">UIBarButtonItem</span> <span class="o">*</span><span class="n">left</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIBarButtonItem</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithTitle</span><span class="p">:</span><span class="s">@"left"</span>
                                                           <span class="nl">style:</span><span class="n">UIBarButtonItemStylePlain</span>
                                                          <span class="nl">target:</span><span class="nb">nil</span>
                                                          <span class="nl">action:</span><span class="nb">nil</span><span class="p">];</span>
  <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">navigationItem</span> <span class="nf">setLeftBarButtonItem</span><span class="p">:</span><span class="n">left</span><span class="p">];</span>
  <span class="n">self</span><span class="p">.</span><span class="n">navigationItem</span><span class="p">.</span><span class="n">prompt</span> <span class="o">=</span> <span class="s">@"prompt"</span><span class="p">;</span>
  <span class="n">self</span><span class="p">.</span><span class="n">navigationItem</span><span class="p">.</span><span class="n">backBarButtonItem</span> <span class="o">=</span>
      <span class="p">[[</span><span class="n">UIBarButtonItem</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithTitle</span><span class="p">:</span><span class="s">@"back to launch screen"</span>
                                       <span class="nl">style:</span><span class="n">UIBarButtonItemStyleDone</span>
                                      <span class="nl">target:</span><span class="nb">nil</span>
                                      <span class="nl">action:</span><span class="nb">nil</span><span class="p">];</span>
  <span class="n">UIBarButtonItem</span> <span class="o">*</span><span class="n">right</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIBarButtonItem</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithTitle</span><span class="p">:</span><span class="s">@"right"</span>
                                                            <span class="nl">style:</span><span class="n">UIBarButtonItemStylePlain</span>
                                                           <span class="nl">target:</span><span class="nb">nil</span>
                                                           <span class="nl">action:</span><span class="nb">nil</span><span class="p">];</span>
  <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">navigationItem</span> <span class="nf">setRightBarButtonItem</span><span class="p">:</span><span class="n">right</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="toolbar">toolbar</h3>

<p>要展示 toolbar，需要先在 NavigationContorller 中设置成显示，</p>

<p><em>MyNavigationController.m</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">self</span><span class="p">.</span><span class="n">toolbarHidden</span> <span class="o">=</span> <span class="nb">NO</span><span class="p">;</span>
</code></pre></div></div>

<p>然后在子 Controller 中配置具体要展示的内容：</p>

<p><em>MyViewController.m</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span> <span class="p">{</span>
  <span class="n">self</span><span class="p">.</span><span class="n">toolbarItems</span> <span class="o">=</span> <span class="p">@[</span>
    <span class="p">[[</span><span class="n">UIBarButtonItem</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithTitle</span><span class="p">:</span><span class="s">@"btn1"</span>
                                     <span class="nl">style:</span><span class="n">UIBarButtonItemStylePlain</span>
                                    <span class="nl">target:</span><span class="nb">nil</span>
                                    <span class="nl">action:</span><span class="nb">nil</span><span class="p">],</span>
    <span class="p">[[</span><span class="n">UIBarButtonItem</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithTitle</span><span class="p">:</span><span class="s">@"btn2"</span>
                                     <span class="nl">style:</span><span class="n">UIBarButtonItemStylePlain</span>
                                    <span class="nl">target:</span><span class="nb">nil</span>
                                    <span class="nl">action:</span><span class="nb">nil</span><span class="p">]</span>
  <span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="相关资源">相关资源</h2>

<ul>
  <li><a href="https://developer.apple.com/library/archive/featuredarticles/ViewControllerPGforiPhoneOS/">View Controller Programming Guide for iOS</a></li>
</ul>


  </div><a class="u-url" href="/2019/12/08/CocoaTouch-View-Controller-%E7%9B%B8%E5%85%B3.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">牛さんの部落格</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">牛さんの部落格</li><li><a class="u-email" href="mailto:liuwayong@gmail.com">liuwayong@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>notes about the coding life</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
