I"<h1 id="html-capture-属性">HTML <code class="language-plaintext highlighter-rouge">capture</code> 属性</h1>

<p><code class="language-plaintext highlighter-rouge">file</code> 类型的 <code class="language-plaintext highlighter-rouge">&lt;input&gt;</code> 除了调起系统的文件选择框外，还可通过指定 <code class="language-plaintext highlighter-rouge">capture</code> 属性来现场拍照或录制。配合 <code class="language-plaintext highlighter-rouge">accept</code> 属性，可实现更加便捷的文件获取。</p>

<p>比如想要录制一段视频，可以这么写：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">accept=</span><span class="s">"video/*"</span> <span class="na">capture</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>点击之后直接打开摄像头进行拍摄，而不是弹起文件选择。</p>

<p><img src="https://user-images.githubusercontent.com/3783096/59446364-f405ae00-8e33-11e9-8614-f626d383f63a.gif" alt="`capture` 属性演示" /></p>
<p align="center">`capture` 属性演示</p>

<p>如果没有这个 <code class="language-plaintext highlighter-rouge">capture</code> 属性，则需要先借助 <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia"><code class="language-plaintext highlighter-rouge">Media​Devices​.get​User​Media()
</code></a> 获取用户的相机权限，然后再通过 <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder">MediaRecorder</a> API 进行录制，处理得到的文件。</p>

<p>同样，对于拍照的情况也非常方便了，可以这么写：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">accept=</span><span class="s">"image/*"</span> <span class="na">capture=</span><span class="s">"camera"</span> <span class="nt">/&gt;</span>
<span class="c">&lt;!-- or --&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">accept=</span><span class="s">"image/*;capture=camera"</span><span class="nt">/&gt;</span>
</code></pre></div></div>

<p>更多示例可参见 <a href="https://w3c.github.io/html-media-capture/#examples">W3C 文档中示例部分</a>。</p>

<h2 id="浏览器兼容性">浏览器兼容性</h2>

<p>从 <a href="https://caniuse.com/#feat=html-media-capture">Can I Use - HTML Media Capture</a> 的统计来看，支持得还不是很好。但尝试后发现 iOS 只能录制视频，即使指定 <code class="language-plaintext highlighter-rouge">accept="audio/*"</code> 也是调起视频录制，而不是录音。</p>

<h2 id="相关资源">相关资源</h2>

<ul>
  <li><a href="https://github.com/w3c/html-media-capture/">w3c/html-media-capture</a></li>
  <li><a href="https://www.w3.org/TR/html-media-capture/">W3C - HTML Media Capture</a></li>
  <li><a href="https://caniuse.com/#feat=html-media-capture">Can I Use - HTML Media Capture</a></li>
  <li><a href="https://www.html5rocks.com/en/tutorials/getusermedia/intro/">Capturing Audio &amp; Video in HTML5</a></li>
  <li><a href="https://stackoverflow.com/questions/21523544/html-file-input-control-with-capture-and-accept-attributes-works-wrong">HTML file input control with capture and accept attributes works wrong?</a></li>
</ul>

:ET