I"<h1 id="vim-插件的安装">Vim 插件的安装</h1>

<p>Vim 自带了文本格式化，通过 <code class="language-plaintext highlighter-rouge">gg=G</code> 触发。但大数情况下不满足需求，对于特定语言，比如 JavaScript，需要安装相应的插件来实现。</p>

<h2 id="插件的存在形式">插件的存在形式</h2>

<p>Vim 插件以三种形式存在，</p>
<ul>
  <li>单个的 <code class="language-plaintext highlighter-rouge">.vim</code> 文件，可在 <a href="https://www.vim.org/scripts/index.php">官网 scripts 页面</a> 搜索下载。</li>
  <li><a href="https://www.vim.org/scripts/script.php?script_id=1502">Vimball 文件</a>。</li>
  <li>以约定格式放置的文件夹（<code class="language-plaintext highlighter-rouge">plugin/*</code>,<code class="language-plaintext highlighter-rouge"> syntax/*</code>）。</li>
</ul>

<h2 id="安装">安装</h2>

<p>以格式化 JavaScript 的插件 <a href="https://www.vim.org/scripts/script.php?script_id=2727">jsbeautify</a> 为例，</p>

<ul>
  <li>下载对应的 <a href="https://www.vim.org/scripts/download_script.php?src_id=11120">jsbeautify.vim</a> 文件后放置到 <code class="language-plaintext highlighter-rouge">~/.vim/plugin</code> 目录下。</li>
  <li>如果 <code class="language-plaintext highlighter-rouge">~/.vim</code> 目录下没有 <code class="language-plaintext highlighter-rouge">plugin</code> 目录，创建一个。</li>
  <li>如果自定义过 Vim 的 rumtimepath，目录会有差异，可通过 <code class="language-plaintext highlighter-rouge">:set rumtimepath?</code> 查看 Vim 的运行目录。</li>
  <li>重启 Vim 或执行 <code class="language-plaintext highlighter-rouge">:source ~/.vimrc</code> 让 Vim 加载插件。</li>
</ul>

<h2 id="使用">使用</h2>

<p>根据该插件的使用描述：</p>

<blockquote>
  <p>usage:
 ` <leader>ff`
or
  bind the `g:Jsbeautify()` function to any short key you like</leader></p>
</blockquote>

<p>配置好之后，使用快捷键 <code class="language-plaintext highlighter-rouge">&lt;leader&gt;ff</code> 进行格式化。</p>

<p>此处 <code class="language-plaintext highlighter-rouge">&lt;leader&gt;</code> 键默认为 <code class="language-plaintext highlighter-rouge">\</code>，可通过 <code class="language-plaintext highlighter-rouge">:echo mapleader</code> 查看所绑定的 leader key。如果输出如下的报错信息，说明没有自己绑定过，使用的是默认的。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:echo mapleader
Undefined variable: mapleader
Invalid expression: mapleader
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/3783096/58380036-7aba2e80-7fde-11e9-8e5e-18e6d196dd62.gif" alt="Vim 中格式化 JavaScript 代码" /></p>
<p align="center">Vim 中格式化 JavaScript 代码</p>

<h2 id="相关资源">相关资源</h2>

<ul>
  <li><a href="https://vi.stackexchange.com/questions/613/how-do-i-install-a-plugin-in-vim-vi">How do I install a plugin in Vim/vi?</a></li>
</ul>

:ET