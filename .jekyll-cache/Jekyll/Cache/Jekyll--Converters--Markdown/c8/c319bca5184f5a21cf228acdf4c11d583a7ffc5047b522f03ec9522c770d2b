I"S<h1 id="unix-开发中的-make-三连">Unix 开发中的 Make 三连</h1>

<p>Unix 开发过程中，经常性的操作是从源码编译安装相应库文件，所以下面三个命令便是家常便饭，俗称三连：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">./configure</code></li>
  <li><code class="language-plaintext highlighter-rouge">make</code></li>
  <li><code class="language-plaintext highlighter-rouge">make install</code></li>
</ul>

<p>下面来看看这三步分别做了什么。</p>

<h2 id="configure"><code class="language-plaintext highlighter-rouge">configure</code></h2>

<p>执行 <code class="language-plaintext highlighter-rouge">./configure</code> 文件一般是进行正式编译前的一些环境准备，准备编译需要的依赖项等。比如检测当前的系统平台，检测需要的编译器是否存在如何调用，配置和生成相应编译所需文件。</p>

<h2 id="make"><code class="language-plaintext highlighter-rouge">make</code></h2>

<p>前期准备工作完成无误后，就可能调用 <code class="language-plaintext highlighter-rouge">make</code> 来执行编译了。实际执行的是 <code class="language-plaintext highlighter-rouge">Makefile</code> 文件中定义的任务来从源码进行项目的编译。</p>

<p>通常情况下下载下来的 tar 包中可能没有包含正式的 <code class="language-plaintext highlighter-rouge">Makefile</code> 文件，而是另外形式呈现的临时文件，比如 <code class="language-plaintext highlighter-rouge">Makefile.in</code>，<code class="language-plaintext highlighter-rouge">Makefile.am</code>,<code class="language-plaintext highlighter-rouge">Makefile.MSVC</code> 等，然后在执行 <code class="language-plaintext highlighter-rouge">./configure</code> 的时候根据相应环境来生成最终需要的 <code class="language-plaintext highlighter-rouge">Makefile</code> 文件。</p>

<h2 id="make-install"><code class="language-plaintext highlighter-rouge">make install</code></h2>

<p>项目编译正常后，会生成相应的产出，可执行文件，<code class="language-plaintext highlighter-rouge">so</code> 或 <code class="language-plaintext highlighter-rouge">o</code> 文件或 <code class="language-plaintext highlighter-rouge">DLL</code> 动态链接文件等。最后一步就是将生成的文件复制到相应的系统目录，这个过程便是安装。</p>

<p>比如将可执行文件复制到系统 <code class="language-plaintext highlighter-rouge">PATH</code> 能取到的地方，帮助文档复制到 <code class="language-plaintext highlighter-rouge">MANPATH</code>，其他文件复制到对应目录下。</p>

<h2 id="相关资源">相关资源</h2>

<ul>
  <li><a href="https://thoughtbot.com/blog/the-magic-behind-configure-make-make-install">The magic behind configure, make, make install</a></li>
</ul>

:ET